<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Register Page</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <!-- partial:index.partial.html -->
    <div class="box-form">
      <div class="left">
        <div class="overlay">
          <h2>Bakery Management System.</h2>
          <br />
          <p></p>
        </div>
      </div>

      <div class="right">
        <h2>Create Account.</h2>
        <div class="inputs">
			<form method="post" id="registration-form">
				 <!-- {% csrf_token %} -->
          <input type="text" id="name" name="name" placeholder="Name" /><br />

          <input
            type="text"
            id="username"
            name="username"
            placeholder="Username"
          /><br />

          <input
            type="email"
            id="email"
            name="email"
            placeholder="Email"
          /><br />

          <input
            type="password"
            id="password"
            name="password"
            placeholder="Password"
          /><br />
        
		</form>
        </div>

        <br /><br />

        <div class="remember-me--forget-password">
          <!-- Angular -->
        </div>
        
<p>Already have Account? <a>Login</a></p>

        <br />
        <button type="submit" value="Register">Register</button>
      </div>
    </div>
    <!-- partial -->

	<script>

		document.getElementById("registration-form").addEventListener("submit", function(event) {
		  var nameInput = document.getElementById("name");
		  if (nameInput.value == "") {
			alert("Please enter your name.");
			event.preventDefault();
			return false;
		  }
		
		  var usernameInput = document.getElementById("username");
		  if (usernameInput.value == "") {
			alert("Please enter a username.");
			event.preventDefault();
			return false;
		  }
		
		  var emailInput = document.getElementById("email");
		  if (emailInput.value == "") {
			alert("Please enter your email.");
			event.preventDefault();
			return false;
		  }
		
		  var passwordInput = document.getElementById("password");
		  if (passwordInput.value == "") {
			alert("Please enter a password.");
			event.preventDefault();
			return false;
		  }
	  
		});
	  </script>
	  
	  <!-- Include the Toastify CSS and JS files -->
	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
	  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
	  
	  <script>
		  const form = document.getElementById('registration-form');
		  form.addEventListener('submit', (event) => {
			  event.preventDefault();
			  fetch('/register/', {
				  method: 'POST',
				  body: new FormData(form),
			  })
			  .then(response => response.json())
			  .then(data => {
				  if (data.success) {
					  Toastify({
						  text: 'You have successfully registered!',
						  duration: 3000,
						  gravity: 'bottom',
						  position: 'right',
						  backgroundColor: 'green',
					  }).showToast();
					  form.reset();
				  }
			  })
			  .catch(error => console.error(error));
		  });
	  </script>
  </body>
</html>
